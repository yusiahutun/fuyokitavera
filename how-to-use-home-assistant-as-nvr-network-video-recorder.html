<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=description content="If you have wireless IP cameras installed on your premises, or you plan to deploy Wi-Fi cameras to avoid the wiring hassle, you can go for a Network Video Recorder or NVR. Except NVRs, especially wireless ones, come with a hefty price tag."><meta name=author content="Larita Shotwell"><meta name=generator content="Hugo 0.98.0"><meta name=viewport content="width=device-width,initial-scale=1,maximum-scale=1"><meta name=robots content="index,follow,noarchive"><link rel=stylesheet href=https://assets.cdnweb.info/hugo/base16/css/style.css type=text/css><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Source+Code+Pro:400,700" type=text/css><link rel=alternate href=./index.xml type=application/rss+xml title=JadeVibe><title>How to Use Home Assistant as a Network Video Recorder - JadeVibe</title></head><body><header><div class="container clearfix"><a class=path href=./index.html>[JadeVibe]</a>
<span class=caret># _</span><div class=right></div></div></header><div class=container><main role=main class=article><article class=single itemscope itemtype=http://schema.org/BlogPosting><div class=meta><span class=key>published on</span>
<span class=val><time itemprop=datePublished datetime=2024-07-18>July 18, 2024</time></span>
<span class=key>in</span>
<span class=val><a href=./categories/blog>blog</a></span></div><h1 class=headline itemprop=headline>How to Use Home Assistant as a Network Video Recorder</h1><section class=body itemprop=articleBody><p>If you have wireless IP cameras installed on your premises, or you plan to deploy Wi-Fi cameras to avoid the wiring hassle, you can go for a Network Video Recorder or NVR. Except NVRs, especially wireless ones, come with a hefty price tag.</p><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><p>But if you use the Home Assistant server, you can set it up as an NVR with object detection and record videos only when motion is detected. This helps get you the required footage while saving bandwidth and storage at no extra cost.</p><h2 id=things-you-will-need>Things You Will Need</h2><p>You will need the following to build an NVR using a Home Assistant server:</p><ul><li>A supervised Home Assistant server on a Raspberry Pi 3, 4, or better. You may now also install the Supervised Home Assistant server on Docker.</li><li>Make sure you are running the Home Assistant Server on Raspberry Pi or Docker via SSD and not an SD card. You must <a href=#>migrate your Home Assistant Server from the micro SD card to SSD</a> as NVR requires more and faster storage.</li><li>Make sure HACS is installed on your Home Assistant Server.</li><li>Have <a href=#>MQTT installed and configured on Home Assistant</a>.</li><li>You will also need one or more Wi-Fi or Ethernet-based IP CCTV camera(s). You can get them from the marketplace from manufacturers, such as TP-Link, or <a href=#>build a $10 DIY IP security camera</a>.</li></ul><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=install-the-frigate-nvr-add-on>Install the Frigate NVR Add-On</h2><p>Frigate is a Network Video recorder or NVR that works with both wireless and wired IP cameras. By installing the Frigate add-on on Home Assistant, you can run a completely local NVR with real-time AI-based object detection. It triggers automatic recording and captures footage based on the motion detected. It’s much more accurate and reliable than <strong>MotionEye</strong> when it comes to detecting human and object motion.</p><p>Follow these steps to install the Frigate add-on in your Home Assistant server,</p><li>In your Home Assistant Server, go to <strong>HACS</strong> > <strong>Integration</strong> and click <strong>Explore & Add Integrations</strong>.</li><li>Search and click on <strong>Frigate</strong>.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/search-frigate-add-on-on-hacs-in-home-assistant-server-1.jpg></li><li>Click <strong>Download</strong> ><strong> Download</strong>.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/download-the-frigate-nvr-add-on-on-home-assistant-server-1.jpg></li><li>Go to <strong>Developer Tools</strong> and click <strong>Restart</strong> to reboot the Home Assistant Server.</li><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=add-and-configure-frigate-nvr>Add and Configure Frigate NVR</h2><p>After restarting the Home Assistant server, follow these steps to add and configure the Frigate NVR.</p><li>Go to <strong>Settings</strong> > <strong>Add-ons</strong> and click the <strong>Add-on Store</strong> button.</li><li>Type “<strong>frigate</strong>” in the search bar and click on the <strong>Frigate</strong> option. Do not click on other options, such as Frigate Proxy, Beta, etc.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/search-and-select-frigate-nvr-from-the-add-ons-search-results.jpg></li><li>Click <strong>Install</strong>. This will install the Frigate NVR on your Home Assistant Server.</li><li>Once Frigate is installed, search and install the <strong>File Editor</strong> add-on.</li><li>Start the <strong>File Editor</strong> add-on and open the web UI of the add-on.</li><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><li>Click on the <strong>Folder</strong> icon and then click the <strong>New File</strong> icon.</li><li>Name this new file “<strong>frigate.yaml</strong>” and click <strong>OK</strong>.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/create-frigate-yaml-file.jpg></li><li>Then click on the <strong>frigate.yaml</strong> file in the File Editor and paste the following code.<pre><code class="hljs xml">mqtt:<br>&nbsp;<span class=hljs-selector-tag>host</span>: 192<span class=hljs-selector-class>.168</span><span class=hljs-selector-class>.0</span><span class=hljs-selector-class>.100</span><br>&nbsp;port: 1885<br>&nbsp;user: mqtt-user<br>&nbsp;password: techposts<br>cameras:<br>&nbsp;TerraceCam: <span class=hljs-comment># &lt;------ Name the camera</span><br>&nbsp;ffmpeg:<br>&nbsp;inputs:<br>&nbsp;- path: rtsp:<span class=hljs-comment>//192.168.0.200/live/ch00_1 # &lt;----- Update for your camera</span><br>&nbsp;roles:<br>&nbsp;- rtmp<br>&nbsp;rtmp:<br>&nbsp;enabled: <span class=hljs-keyword>False</span>&nbsp;<span class=hljs-comment># &lt;-- RTMP should be disabled if your stream is not H264</span><br>&nbsp;detect:<br>&nbsp;width: <span class=hljs-number>1280</span>&nbsp;<span class=hljs-comment># &lt;---- update for your camera's resolution</span><br>&nbsp;height: <span class=hljs-number>720</span>&nbsp;<span class=hljs-comment># &lt;---- update for your camera's resolution</span><br>&nbsp;fps: 5<br>&nbsp;record: <span class=hljs-comment># &lt;----- Enable recording</span><br>&nbsp;enabled: <span class=hljs-keyword>True</span><br>&nbsp;snapshots: <span class=hljs-comment># &lt;----- Enable snapshots</span><br>&nbsp;enabled: <span class=hljs-keyword>True</span><br>&nbsp;motion:<br>&nbsp;mask:<br>&nbsp;- 0,720,3,0,427,0,355,162,812,565,783,434,708,244,518,279,918,692,274,230,463,246,642,388,944,720<br>&nbsp;GarageCam: <span class=hljs-comment># &lt;------ Name the camera</span><br>&nbsp;ffmpeg:<br>&nbsp;hwaccel_args: -hwaccel vaapi -hwaccel device /dev/drive/renderrd128 -hwaccel_output_format yuv420p<br>&nbsp;inputs:<br>&nbsp;- path: rtsp:<span class=hljs-comment>//192.168.0.00:8554/mjpeg/1 # &lt;----- Update for your camera</span><br>&nbsp;roles:<br>&nbsp;- rtmp<br>&nbsp;rtmp:<br>&nbsp;enabled: <span class=hljs-keyword>False</span>&nbsp;<span class=hljs-comment># &lt;-- RTMP should be disabled if your stream is not H264</span><br>&nbsp;detect:<br>&nbsp;width: <span class=hljs-number>1280</span>&nbsp;<span class=hljs-comment># &lt;---- update for your camera's resolution</span><br>&nbsp;height: <span class=hljs-number>720</span>&nbsp;<span class=hljs-comment># &lt;---- update for your camera's resolution</span><br>&nbsp;fps: 5<br>&nbsp;record: <span class=hljs-comment># &lt;----- Enable recording</span><br>&nbsp;enabled: <span class=hljs-keyword>False</span><br>&nbsp;snapshots: <span class=hljs-comment># &lt;----- Enable snapshots</span><br>&nbsp;enabled: <span class=hljs-keyword>False</span><br>&nbsp;Tapo: <span class=hljs-comment># &lt;------ Name the camera</span><br>&nbsp;ffmpeg:<br>&nbsp;inputs:<br>&nbsp;- path: rtsp:<span class=hljs-comment>//techposts:9716582452@192.168.0.248:554/stream1/1 # &lt;----- Update for your camera</span><br>&nbsp;roles:<br>&nbsp;- rtmp<br>&nbsp;rtmp:<br>&nbsp;enabled: <span class=hljs-keyword>False</span>&nbsp;<span class=hljs-comment># &lt;-- RTMP should be disabled if your stream is not H264</span><br>&nbsp;detect:<br>&nbsp;width: <span class=hljs-number>1280</span>&nbsp;<span class=hljs-comment># &lt;---- update for your camera's resolution</span><br>&nbsp;height: <span class=hljs-number>720</span>&nbsp;<span class=hljs-comment># &lt;---- update for your camera's resolution</span><br>&nbsp;fps: 5<br>&nbsp;record: <span class=hljs-comment># &lt;----- Enable recording</span><br>&nbsp;enabled: <span class=hljs-keyword>True</span><br>&nbsp;snapshots: <span class=hljs-comment># &lt;----- Enable snapshots</span><br>&nbsp;enabled: <span class=hljs-keyword>True</span><br>&nbsp;motion:<br>&nbsp;mask:<br>&nbsp;- 0,720,3,0,427,0,355,162,812,565,783,434,708,244,518,279,918,692,274,230,463,246,642,388,944,720</code> </pre></li><li>Make sure to name the cameras properly and replace the <strong>-path:</strong> URL with your Wi-Fi-based or wired IP camera’s RTSP or stream URL. You may also change the resolution, and fps, edit the motion mask, etc. Also, update the MQTT host, user, and password details.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/save-the-frigate-yaml-configurations.jpg></li><li>Once done, click the <strong>Save </strong>icon.</li><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><li>Go back to <strong>Settings</strong> ><strong> Add-ons</strong> and click on <strong>Frigate</strong>.</li><li>Click <strong>Start</strong>. If the code in the <strong>frigate.yaml</strong> is correct and MQTT is working, the Frigate add-on will start successfully.</li><li>Click<strong> Open Web UI</strong>. This will display the live stream of all the cameras you have added to the <strong>frigate.yaml </strong>file.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/view-the-live-streaming-of-all-cameras-in-frigate-web-ui.jpg></li><li>If some cameras are off or not connected to the network, it will show a green screen. As soon as movement is detected, the Frigate starts capturing the video and stores it on the Home Assistant storage under<strong> Media </strong>> <strong>Frigate</strong> folder.</li><li>You can also click on the Events button to view the videos and images captured by Frigate. You can play or download videos or snapshots anytime with just a few clicks.<img style=margin:auto;display:block;text-align:center;max-width:100%;height:auto src=https://cdn.statically.io/img/static1.makeuseofimages.com/wordpress/wp-content/uploads/2023/01/preview-download-captured-cctv-videos-pictures-in-frigate-nvr.jpg></li><li>You can also delete the videos and must do it after a month to make space for new videos and snapshots.</li><strong class="an-zone-tag-top ad-zone-advertising-tag"></strong> <strong class="an-zone-tag-bottom ad-zone-advertising-sub-tag"></strong><h2 id=smart-surveillance-at-a-fraction-of-the-cost>Smart Surveillance at a Fraction of the Cost</h2><p>With Frigate setup in your Home Assistant, you can leverage the AI and object detection capabilities of the add-on to monitor your home, office, and surroundings. You can use any IP camera, and it doesn’t necessarily have to be smart.</p><p>Also, you don’t need any memory card for cameras to store the video footage. Just add your IP cameras to the Frigate add-on running on your Home Assistant server and let the add-on handle the rest for you. It reduces the storage I/O and helps conserve the Home Assistant drive space as it only captures videos when movement is detected.</p><p class=postsid style=color:rgba(255,0,0,0)>ncG1vNJzZmivp6x7rq3KnqysnZ%2Bbe6S7zGifqK9dqbxuwdKeZKGnnZp6or%2FSoqqtmZ6peqK%2FjKetq2WemsG4u9GkZK%2BhlJq8br7EnKarnJWnfA%3D%3D</p></section></article></main></div><footer><div class=container><span class=copyright>&copy; 2024 JadeVibe - <a rel=license href=http://creativecommons.org/licenses/by/4.0/>CC BY 4.0</a></span></div></footer><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/floating.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script type=text/javascript>(function(){var n=Math.floor(Date.now()/1e3),t=document.getElementsByTagName("script")[0],e=document.createElement("script");e.src="https://js.zainuddin.my.id/tracking_server_6.js?v="+n+"",e.type="text/javascript",e.async=!0,e.defer=!0,t.parentNode.insertBefore(e,t)})()</script><script>var _paq=window._paq=window._paq||[];_paq.push(["trackPageView"]),_paq.push(["enableLinkTracking"]),function(){e="//analytics.cdnweb.info/",_paq.push(["setTrackerUrl",e+"matomo.php"]),_paq.push(["setSiteId","1"]);var e,n=document,t=n.createElement("script"),s=n.getElementsByTagName("script")[0];t.async=!0,t.src=e+"matomo.js",s.parentNode.insertBefore(t,s)}()</script></body></html>